<template>
  <div class="bottom-0 z-50 flex justify-around items-center fixed min-w-full bg-gray-50 mx-auto">
    <teleport to="#modaldiv" v-if="toggleModal">
      <AppModal @on-close="closeModal"  />
    </teleport>
    <section class="flex justify-center">
      <button :class="{'text-transparent bg-clip-text bg-gradient-to-br from-pink-400 to-red-600' : toggleModal }" 
        @click.prevent="toggleModal = !toggleModal" >
        <i class="text-5xl fas fa-list"></i>
      </button> 
    </section>
    <section class="flex items-center flex-col w-2/3 p-4">
      <button @click.prevent="togglePlay" class="border shadow rounded-full my-5 h-12 w-12">
        <i class="fas fa-play pl-1.5 text-2xl" v-if="!playing"></i>
        <i class="fas fa-pause pl-0.5 text-2xl" v-else></i>
      </button>

      <div class="flex">
          {{ seek }}
          /
         {{ duration }}
      </div>
    </section>

    <section class="flex justify-center">
      Volume scrub
    </section>

  </div>
</template>

<script>
import AppModal from '@/components/Modal.vue';
import { mapActions, mapState, mapGetters } from 'vuex'

export default {
  name: 'MusicPlayer',
  components: {
    AppModal,
  },
  emits:['on-close'],
  data() {
    return {
      toggleModal: false,
    };
  },
  computed: {
    ...mapState(['seek', 'duration']),
    ...mapGetters(['playing'])
  },
  methods: {
    ...mapActions(['togglePlay']),
  closeModal() {
    this.toggleModal = false;
  }
  },
}
</script>
